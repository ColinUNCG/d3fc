/*! d3-financial-components 07-05-2015 */

window.fc={version:"0.0.0",charts:{},indicators:{algorithms:{}},scale:{discontinuity:{}},series:{},tools:{},utilities:{}},function(a,b){"use strict";b.utilities.extent=function(b,c){return null===c?a.extent(b):(Array.isArray(b)||(b=[b]),Array.isArray(b[0])||(b=[b]),Array.isArray(c)||(c=[c]),[a.min(b,function(b){return a.min(b,function(b){return a.min(c.map(function(a){return b[a]}))})}),a.max(b,function(b){return a.max(b,function(b){return a.max(c.map(function(a){return b[a]}))})})])}}(d3,fc),function(a,b){"use strict";b.utilities.fn={identity:function(a){return a},index:function(a,b){return b},noop:function(a){}}}(d3,fc),function(a,b){"use strict";b.utilities.fractionalBarWidth=function(b){return function(c){function d(a,b){for(var c=[],d=1;d<a.length;d++)c.push(b(a[d],a[d-1]));return c}if(c.length<=1)return 10;c.sort();var e=d(c,function(a,b){return Math.abs(a-b)}),f=a.min(e);return b*f}}}(d3,fc),function(a,b){"use strict";b.utilities.innerDimensions=function(a){var b=getComputedStyle(a);return{width:parseFloat(b.width)-parseFloat(b.paddingLeft)-parseFloat(b.paddingRight),height:parseFloat(b.height)-parseFloat(b.paddingTop)-parseFloat(b.paddingBottom)}}}(d3,fc),function(a,b){"use strict";b.utilities.pointSnap=function(a,b,c,d,e){return function(f,g){for(var h=a.invert(f),i=b.invert(g),j=null,k=Number.MAX_VALUE,l=0,m=e.length;m>l;l++){var n=e[l],o=h-c(n),p=i-d(n),q=Math.sqrt(o*o+p*p);if(!(k>q))break;k=q,j=n}return{datum:j,x:j?a(c(j)):f,y:j?b(d(j)):g}}},b.utilities.seriesPointSnap=function(a,c){return function(d,e){var f=a.xScale(),g=a.yScale(),h=a.xValue?a.xValue():function(a){return a.date},i=(a.yValue||a.yCloseValue).call(a);return b.utilities.pointSnap(f,g,h,i,c)(d,e)}}}(d3,fc),function(a,b){"use strict";b.utilities.property=function(a){var b=function(a){return arguments.length?(b.value=a,this):b.value};return b.value=a,b},b.utilities.functorProperty=function(b){var c=function(b){return arguments.length?(c.value=a.functor(b),this):c.value};return c.value=a.functor(b),c}}(d3,fc),function(a,b){"use strict";b.utilities.rebind=function(b,c,d){return"object"!=typeof d?a.rebind.apply(a,arguments):(Object.keys(d).forEach(function(a){var e=c[d[a]];b[a]=function(){var a=e.apply(c,arguments);return a===c?b:a}}),b)}}(d3,fc),function(a,b){"use strict";b.utilities.simpleDataJoin=function(c,d,e,f){var g=1e-6,h=c.selectAll("g."+d).data(e,f||b.utilities.fn.index),i=h.enter().append("g").classed(d,!0).style("opacity",g),j=a.transition(h.exit()).style("opacity",g).remove();return h=a.transition(h).style("opacity",1),h.enter=a.functor(i),h.exit=a.functor(j),h}}(d3,fc),function(a,b){"use strict";b.charts.linearTimeSeries=function(){var c=b.scale.dateTime(),d=a.scale.linear(),e=a.svg.axis().scale(c).orient("bottom"),f=a.svg.axis().scale(d).orient("left"),g=function(b){b.each(function(b){var h=a.select(this),i=h.selectAll("svg").data([b]);i.enter().append("svg").attr("overflow","hidden").layout("flex",1);var j=i.selectAll("rect.background").data([b]);j.enter().append("rect").attr("class","background").layout({position:"absolute",top:0,right:0,bottom:0,left:0});var k=i.selectAll("g.plot-area").data([b]);k.enter().append("g").attr("class","plot-area").layout({position:"absolute",top:0,right:0,bottom:0,left:0});var l=i.selectAll("g.y-axis").data([b]);l.enter().append("g").attr("class","axis y-axis").layout({position:"absolute",top:0,right:0,bottom:0});var m=h.selectAll("g.x-axis").data([b]);m.enter().append("g").attr("class","axis x-axis").layout("height",20),h.layout(),c.range([0,m.layout("width")]),d.range([l.layout("height"),0]),m.call(e),l.call(f);var n=g.plotArea.value;n.xScale(c).yScale(d),k.call(n)})};return b.utilities.rebind(g,c,{xDiscontinuityProvider:"discontinuityProvider",xDomain:"domain",xNice:"nice"}),b.utilities.rebind(g,d,{yDomain:"domain",yNice:"nice"}),b.utilities.rebind(g,e,{xTicks:"ticks"}),b.utilities.rebind(g,f,{yTicks:"ticks"}),g.xScale=function(){return c},g.yScale=function(){return d},g.plotArea=b.utilities.property(b.series.line()),g}}(d3,fc),function(a,b){"use strict";b.charts.sparkline=function(){function c(b){function c(a){return b.filter(function(b){return e(b)===a})[0]}var d=i.xValue(),e=i.yValue(),f=a.max(b,e),g=a.min(b,e);return[{x:d(b[0]),y:e(b[0])},{x:d(c(f)),y:f},{x:d(c(g)),y:g},{x:d(b[b.length-1]),y:e(b[b.length-1])}]}var d=b.scale.dateTime(),e=a.scale.linear(),f=b.series.line(),g=b.series.point().xValue(function(a){return a.x}).yValue(function(a){return a.y}).decorate(function(a){a.attr("class",function(a,b){switch(b){case 0:return"open";case 1:return"high";case 2:return"low";case 3:return"close"}})}),h=b.series.multi().series([f,g]).mapping(function(a,b){switch(b){case g:return c(a);default:return a}}),i=function(c){g.radius(i.radius.value),c.each(function(c){var f=a.select(this),g=b.utilities.innerDimensions(this),j=i.radius.value;d.range([j,g.width-j]),e.range([g.height-j,j]),h.xScale(d).yScale(e),f.call(h)})};return b.utilities.rebind(i,d,{xDiscontinuityProvider:"discontinuityProvider",xDomain:"domain"}),b.utilities.rebind(i,e,{yDomain:"domain"}),b.utilities.rebind(i,f,"xValue","yValue"),i.xScale=function(){return d},i.yScale=function(){return e},i.radius=b.utilities.property(2),i}}(d3,fc),function(a){"use strict";a.dataGenerator=function(){var b=function(a,b,d){for(var e,f=[],g=0,h=0,i=c.stepsPerDay.value;f.length<a;)e=b.slice(h,h+i),f.push({date:new Date(c.startDate.value.getTime()),open:e[0],high:Math.max.apply({},e),low:Math.min.apply({},e),close:e[i-1],volume:d[g]}),h+=i,g+=1,c.startDate.value.setUTCDate(c.startDate.value.getUTCDate()+1);return f},c=function(a){var e=new Date(c.startDate.value.getTime());e.setUTCDate(c.startDate.value.getUTCDate()+a);var f=315569e5,g=(e.getTime()-c.startDate.value.getTime())/f,h=d(g,a*c.stepsPerDay.value,c.mu.value,c.sigma.value,c.startPrice.value),i=d(g,a,0,c.sigma.value,c.startVolume.value);return i=i.map(function(a){var b=Math.min(0,Math.max(c.volumeNoiseFactor.value,1)),d=1+b*(1-2*Math.random());return Math.floor(a*d)}),c.startPrice.value=h[h.length-1],c.startVolume.value=i[i.length-1],b(a,h,i).filter(function(a){return!c.filter.value||c.filter.value(a.date)})},d=function(a,b,c,d,e){var f,g,h=d3.random.normal(),i=a/b,j=new Array(b+1);for(g=1;g<j.length;g+=1)f=h(),f*=Math.sqrt(i),f*=d,f+=(c-d*d/2)*i,j[g]=Math.exp(f);for(j[0]=e,g=1;g<j.length;g+=1)j[g]=j[g-1]*j[g];return j};return c.mu=a.utilities.property(.1),c.sigma=a.utilities.property(.1),c.startPrice=a.utilities.property(100),c.startVolume=a.utilities.property(1e5),c.startDate=a.utilities.property(new Date),c.stepsPerDay=a.utilities.property(50),c.volumeNoiseFactor=a.utilities.property(.3),c.filter=a.utilities.property(function(a){return!(0===a.getDay()||6===a.getDay())}),c}}(fc),function(a,b){"use strict";b.indicators.algorithms.bollingerBands=function(){var c=b.indicators.algorithms.slidingWindow().accumulator(function(b){var c=a.mean(b),e=a.deviation(b),f=d.multiplier.value.apply(this,arguments);return{upper:c+f*e,average:c,lower:c-f*e}}),d=function(a){return c(a)};return d.multiplier=b.utilities.functorProperty(2),a.rebind(d,c,"windowSize","inputValue","outputValue"),d}}(d3,fc),function(a,b){"use strict";b.indicators.algorithms.percentageChange=function(){var a=function(b){if(0===b.length)return[];var c=a.baseIndex.value(b),d=a.inputValue.value(b[c]);return b.map(function(b){var c=(a.inputValue.value(b)-d)/d;return a.outputValue.value(b,c)})};return a.baseIndex=b.utilities.functorProperty(0),a.inputValue=b.utilities.property(b.utilities.fn.identity),a.outputValue=b.utilities.property(function(a,b){return b}),a}}(d3,fc),function(a,b){"use strict";b.indicators.algorithms.relativeStrengthIndicator=function(){var c=b.indicators.algorithms.slidingWindow().windowSize(14).accumulator(function(a){for(var b=[],c=[],e=0,f=a.length;f>e;e++){var g=a[e],h=d.openValue.value(g),i=d.closeValue.value(g);b.push(h>i?h-i:0),c.push(i>h?i-h:0)}var j=d.averageAccumulator.value(b);if(0===j)return 100;var k=d.averageAccumulator.value(c)/j;return 100-100/(1+k)}),d=function(a){return c(a)};return d.openValue=b.utilities.property(function(a){return a.open}),d.closeValue=b.utilities.property(function(a){return a.close}),d.averageAccumulator=b.utilities.property(function(a){for(var b=1/a.length,c=a[0],d=1,e=a.length;e>d;d++)c=b*a[d]+(1-b)*c;return c}),a.rebind(d,c,"windowSize","outputValue"),d}}(d3,fc),function(a,b){"use strict";b.indicators.algorithms.slidingWindow=function(){var a=function(b){var c=a.windowSize.value.apply(this,arguments),d=a.accumulator.value,e=a.inputValue.value,f=a.outputValue.value,g=b.slice(0,c).map(e);return b.slice(c-1,b.length).map(function(a,b){b>0&&(g.shift(),g.push(e(a)));var c=d(g);return f(a,c)})};return a.windowSize=b.utilities.functorProperty(10),a.accumulator=b.utilities.property(b.utilities.fn.noop),a.inputValue=b.utilities.property(b.utilities.fn.identity),a.outputValue=b.utilities.property(function(a,b){return b}),a}}(d3,fc),function(a,b){"use strict";b.indicators.bollingerBands=function(){var c=b.indicators.algorithms.bollingerBands(),d=function(a){return i.readCalculatedValue.value(a)||{}},e=b.series.area().y0Value(function(a){return d(a).upper}).y1Value(function(a){return d(a).lower}),f=b.series.line().yValue(function(a){return d(a).upper}),g=b.series.line().yValue(function(a){return d(a).average}),h=b.series.line().yValue(function(a){return d(a).lower}),i=function(b){c.inputValue(i.yValue.value).outputValue(i.writeCalculatedValue.value),e.xScale(i.xScale.value).yScale(i.yScale.value).xValue(i.xValue.value),f.xScale(i.xScale.value).yScale(i.yScale.value).xValue(i.xValue.value),g.xScale(i.xScale.value).yScale(i.yScale.value).xValue(i.xValue.value),h.xScale(i.xScale.value).yScale(i.yScale.value).xValue(i.xValue.value),b.each(function(b){c(b);var d=a.select(this),i=d.selectAll("g.area").data([b]);i.enter().append("g").attr("class","area"),i.call(e);var j=d.selectAll("g.upper").data([b]);j.enter().append("g").attr("class","upper"),j.call(f);var k=d.selectAll("g.average").data([b]);k.enter().append("g").attr("class","average"),k.call(g);var l=d.selectAll("g.lower").data([b]);l.enter().append("g").attr("class","lower"),l.call(h)})};return i.xScale=b.utilities.property(a.time.scale()),i.yScale=b.utilities.property(a.scale.linear()),i.yValue=b.utilities.property(function(a){return a.close}),i.xValue=b.utilities.property(function(a){return a.date}),i.writeCalculatedValue=b.utilities.property(function(a,b){a.bollingerBands=b}),i.readCalculatedValue=b.utilities.property(function(a){return a.bollingerBands}),a.rebind(i,c,"multiplier","windowSize"),i}}(d3,fc),function(a,b){"use strict";b.indicators.movingAverage=function(){var c=b.indicators.algorithms.slidingWindow().accumulator(a.mean),d=b.series.line(),e=function(b){c.inputValue(e.yValue.value).outputValue(e.writeCalculatedValue.value),d.xScale(e.xScale.value).yScale(e.yScale.value).xValue(e.xValue.value).yValue(e.readCalculatedValue.value),b.each(function(b){c(b),a.select(this).call(d)})};return e.xScale=b.utilities.property(a.time.scale()),e.yScale=b.utilities.property(a.scale.linear()),e.yValue=b.utilities.property(function(a){return a.close}),e.xValue=b.utilities.property(function(a){return a.date}),e.writeCalculatedValue=b.utilities.property(function(a,b){a.movingAverage=b}),e.readCalculatedValue=b.utilities.property(function(a){return a.movingAverage}),a.rebind(e,c,"windowSize"),e}}(d3,fc),function(a,b){"use strict";b.indicators.relativeStrengthIndicator=function(){var c=b.indicators.algorithms.relativeStrengthIndicator(),d=b.tools.annotation(),e=b.series.line(),f=function(b){c.outputValue(f.writeCalculatedValue.value),d.xScale(f.xScale.value).yScale(f.yScale.value),e.xScale(f.xScale.value).yScale(f.yScale.value).xValue(f.xValue.value).yValue(f.readCalculatedValue.value),b.each(function(b){c(b);var g=a.select(this),h=g.selectAll("g.annotations").data([[f.upperValue.value.apply(this,arguments),50,f.lowerValue.value.apply(this,arguments)]]);h.enter().append("g").attr("class","annotations"),h.call(d);var i=g.selectAll("g.indicator").data([b]);i.enter().append("g").attr("class","indicator"),i.call(e)})};return f.xScale=b.utilities.property(a.time.scale()),f.yScale=b.utilities.property(a.scale.linear()),f.xValue=b.utilities.property(function(a){return a.date}),f.writeCalculatedValue=b.utilities.property(function(a,b){a.rsi=b}),f.readCalculatedValue=b.utilities.property(function(a){return a.rsi}),f.upperValue=b.utilities.functorProperty(70),f.lowerValue=b.utilities.functorProperty(30),a.rebind(f,c,"openValue","closeValue","windowSize"),f}}(d3,fc),function(a,b,c){"use strict";a.selection.prototype.layout=function(a,c){var d=b.layout(),e=arguments.length;if(2===e)"string"!=typeof a?(d.width(a).height(c),this.call(d)):this.attr("layout-css",a+":"+c);else if(1===e){if("string"==typeof a)return Number(this.attr("layout-"+a));var f=a,g=Object.keys(f).map(function(a){return a+":"+f[a]}).join(";");this.attr("layout-css",g)}else 0===e&&this.call(d);return this},b.layout=function(){function a(a){if(!a)return{};var b=a.split(";"),c={};return b.forEach(function(a){var b=a.split(":");if(2===b.length){var d=b[0].trim(),e=b[1].trim();c[d]=isNaN(e)?e:Number(e)}}),c}function d(b){function c(){for(var a=[],c=0;c<b.childNodes.length;c++){var e=b.childNodes[c];1===e.nodeType&&e.getAttribute("layout-css")&&a.push(d(e))}return a}return{style:a(b.getAttribute("layout-css")),children:c(b),element:b,layout:{width:void 0,height:void 0,top:0,left:0}}}function e(a){a.element.setAttribute("layout-width",a.layout.width),a.element.setAttribute("layout-height",a.layout.height),a.element.nodeName.match(/(?:svg|rect)/i)?(a.element.setAttribute("width",a.layout.width),a.element.setAttribute("height",a.layout.height),a.element.setAttribute("x",a.layout.left),a.element.setAttribute("y",a.layout.top)):a.element.setAttribute("transform","translate("+a.layout.left+", "+a.layout.top+")"),a.children.forEach(e)}var f=function(a){a.each(function(a){var g=b.utilities.innerDimensions(this),h=-1!==f.width.value?f.width.value:g.width,i=-1!==f.height.value?f.height.value:g.height,j=d(this);j.style.width=h,j.style.height=i,c.computeLayout(j),e(j)})};return f.width=b.utilities.property(-1),f.height=b.utilities.property(-1),f}}(d3,fc,computeLayout),function(a,b){"use strict";function c(d,e){function f(){return g.discontinuityProvider.value}function g(a){var b=d.domain(),c=d.range(),e=f().distance(b[0],b[1]),g=f().distance(b[0],a),h=g/e,i=h*(c[1]-c[0])+c[0];return i}return arguments.length||(d=a.time.scale(),e=b.scale.discontinuity.identity()),g.invert=function(a){var b=d.domain(),c=d.range(),e=(a-c[0])/(c[1]-c[0]),g=f().distance(b[0],b[1]),h=e*g;return f().offset(b[0],h)},g.domain=function(a){if(!arguments.length)return d.domain();var b=f().clampUp(a[0]),c=f().clampDown(a[1]);return d.domain([b,c]),g},g.nice=function(){d.nice();var a=d.domain(),b=f().clampUp(a[0]),c=f().clampDown(a[1]);return d.domain([b,c]),g},g.ticks=function(){var a=d.ticks.apply(this,arguments);return b.scale.dateTime.tickTransformer(a,f(),g.domain())},g.copy=function(){return c(d.copy(),f().copy())},g.discontinuityProvider=b.utilities.property(e),a.rebind(g,d,"range","rangeRound","interpolate","clamp","tickFormat")}b.scale.dateTime=function(){return c()},b.scale.dateTime.tickTransformer=function(a,b,c){var d=a.map(function(d,e){if(e<a.length-1)return b.clampUp(d);var f=b.clampUp(d);return f<c[1]?f:b.clampDown(d)}),e=d.reduce(function(a,b){return 0===a.filter(function(a){return a.getTime()===b.getTime()}).length&&a.push(b),a},[]);return e}}(d3,fc),function(a,b){"use strict";b.scale.discontinuity.identity=function(){var a={};return a.distance=function(a,b){return b.getTime()-a.getTime()},a.offset=function(a,b){return new Date(a.getTime()+b)},a.clampUp=b.utilities.fn.identity,a.clampDown=b.utilities.fn.identity,a.copy=function(){return a},a}}(d3,fc),function(a,b){"use strict";b.scale.discontinuity.skipWeekends=function(){function b(a){return 0===a.getDay()||6===a.getDay()}var c=864e5,d=5*c,e=7*c,f={};return f.clampDown=function(c){if(b(c)){var d=0===c.getDay()?2:1,e=a.time.day.ceil(c);return a.time.day.offset(e,-d)}return c},f.clampUp=function(c){if(b(c)){var d=0===c.getDay()?1:2,e=a.time.day.floor(c);return a.time.day.offset(e,d)}return c},f.distance=function(b,c){b=f.clampUp(b),c=f.clampDown(c);var g=a.time.saturday.ceil(b);if(g>c)return c.getTime()-b.getTime();var h=g.getTime()-b.getTime(),i=a.time.saturday.ceil(c),j=i.getTime()-c.getTime(),k=(i.getTime()-g.getTime())/e;return k*d+h-j},f.offset=function(c,e){var g=b(c)?f.clampUp(c):c,h=e,i=a.time.saturday.ceil(g);if(h-=i.getTime()-g.getTime(),0>h)return new Date(g.getTime()+e);g=a.time.day.offset(i,2);var j=Math.floor(h/d);return g=a.time.day.offset(g,7*j),h-=j*d,g=new Date(g.getTime()+h)},f.copy=function(){return f},f}}(d3,fc),function(a,b){"use strict";b.scale.gridlines=function(){var c=function(d){d.each(function(){var d=a.select(this),e=b.utilities.simpleDataJoin(d,"x",c.xScale.value.ticks(c.xTicks.value));e.enter().append("line").attr("class","gridline"),e.select("line").attr({x1:c.xScale.value,x2:c.xScale.value,y1:c.yScale.value.range()[0],y2:c.yScale.value.range()[1]});var f=b.utilities.simpleDataJoin(d,"y",c.yScale.value.ticks(c.yTicks.value));f.enter().append("line").attr("class","gridline"),f.select("line").attr({x1:c.xScale.value.range()[0],x2:c.xScale.value.range()[1],y1:c.yScale.value,y2:c.yScale.value})})};return c.xScale=b.utilities.property(a.time.scale()),c.yScale=b.utilities.property(a.scale.linear()),c.xTicks=b.utilities.property(10),c.yTicks=b.utilities.property(10),c}}(d3,fc),function(a,b){"use strict";b.series.area=function(){var c=function(a){return g.xScale.value(g.xValue.value(a))},d=function(a){return g.yScale.value(g.y0Value.value(a))},e=function(a){return g.yScale.value(g.y1Value.value(a))},f=a.svg.area().defined(function(a){return!isNaN(d(a))&&!isNaN(e(a))}).x(c).y0(d).y1(e),g=function(b){b.each(function(b){var c=a.select(this).selectAll("path.area").data([b]);c.enter().append("path").attr("class","area"),c.attr("d",f),g.decorate.value(c)})};return g.decorate=b.utilities.property(b.utilities.fn.noop),g.xScale=b.utilities.property(a.time.scale()),g.yScale=b.utilities.property(a.scale.linear()),g.y0Value=b.utilities.functorProperty(0),g.y1Value=b.utilities.property(function(a){return a.close}),g.xValue=b.utilities.property(function(a){return a.date}),g}}(d3,fc),function(a,b){"use strict";b.series.bar=function(){var c=function(a){return f.xScale.value(f.xValue.value(a))},d=function(a){return f.yScale.value(f.y0Value.value(a)+f.yValue.value(a))},e=function(a){return f.yScale.value(f.y0Value.value(a))},f=function(g){g.each(function(g){var h=a.select(this),i=b.utilities.simpleDataJoin(h,"bar",g,f.xValue.value);i.enter().append("rect");var j=f.barWidth.value(g.map(c));i.select("rect").attr("x",function(a){return c(a)-j/2}).attr("y",d).attr("width",j).attr("height",function(a){return e(a)-d(a)}),f.decorate.value(i)})};return f.decorate=b.utilities.property(b.utilities.fn.noop),f.xScale=b.utilities.property(a.time.scale()),f.yScale=b.utilities.property(a.scale.linear()),f.barWidth=b.utilities.functorProperty(b.utilities.fractionalBarWidth(.75)),f.yValue=b.utilities.property(function(a){return a.close}),f.xValue=b.utilities.property(function(a){return a.date}),f.y0Value=b.utilities.functorProperty(0),f}}(d3,fc),function(a,b){"use strict";b.series.candlestick=function(){var c=function(a){return h.xScale.value(h.xValue.value(a))},d=function(a){return h.yScale.value(h.yOpenValue.value(a))},e=function(a){return h.yScale.value(h.yHighValue.value(a))},f=function(a){return h.yScale.value(h.yLowValue.value(a))},g=function(a){return h.yScale.value(h.yCloseValue.value(a))},h=function(i){i.each(function(i){var j=a.select(this),k=b.utilities.simpleDataJoin(j,"candlestick",i,h.xValue.value);k.enter().append("path"),k.classed({up:function(a){return h.yCloseValue.value(a)>h.yOpenValue.value(a)},down:function(a){return h.yCloseValue.value(a)<h.yOpenValue.value(a)}});var l=h.barWidth.value(i.map(c));k.select("path").attr("d",function(a){var b="M"+(c(a)-l/2)+","+d(a)+"h"+l+"V"+g(a)+"h"+-l+"V"+d(a)+"z",h="M"+c(a)+","+Math.min(g(a),d(a))+"V"+e(a),i="M"+c(a)+","+Math.max(g(a),d(a))+"V"+f(a);return b+h+i}),h.decorate.value(k)})};return h.decorate=b.utilities.property(b.utilities.fn.noop),h.xScale=b.utilities.property(a.time.scale()),h.yScale=b.utilities.property(a.scale.linear()),h.barWidth=b.utilities.functorProperty(b.utilities.fractionalBarWidth(.75)),h.yOpenValue=b.utilities.property(function(a){return a.open}),h.yHighValue=b.utilities.property(function(a){return a.high}),h.yLowValue=b.utilities.property(function(a){return a.low}),h.yCloseValue=b.utilities.property(function(a){return a.close}),h.xValue=b.utilities.property(function(a){return a.date}),h}}(d3,fc),function(a,b){"use strict";b.series.line=function(){var c=function(a){return f.xScale.value(f.xValue.value(a))},d=function(a){return f.yScale.value(f.yValue.value(a))},e=a.svg.line().defined(function(a){return!isNaN(d(a))}).x(c).y(d),f=function(b){b.each(function(b){var c=a.select(this).selectAll("path.line").data([b]);c.enter().append("path").attr("class","line"),c.attr("d",e),f.decorate.value(c)})};return f.decorate=b.utilities.property(b.utilities.fn.noop),f.xScale=b.utilities.property(a.time.scale()),f.yScale=b.utilities.property(a.scale.linear()),f.yValue=b.utilities.property(function(a){return a.close}),f.xValue=b.utilities.property(function(a){return a.date}),f}}(d3,fc),function(a,b){"use strict";b.series.multi=function(){var c=function(b){b.each(function(b){var d=a.select(this),e=d.selectAll("g.multi-outer").data(c.series.value);e.enter().append("g").attr("class","multi-outer").append("g").attr("class","multi-inner"),e.exit().remove(),e.select("g.multi-inner").each(function(){var d=a.select(this.parentNode).datum();(d.xScale||d.x).call(d,c.xScale.value),(d.yScale||d.y).call(d,c.yScale.value),a.select(this).datum(c.mapping.value(b,d)).call(d)})})};return c.xScale=b.utilities.property(a.time.scale()),c.yScale=b.utilities.property(a.scale.linear()),c.series=b.utilities.property([]),c.mapping=b.utilities.property(b.utilities.fn.identity),c}}(d3,fc),function(a,b){"use strict";b.series.ohlc=function(c){var d=function(a){return i.xScale.value(i.xValue.value(a))},e=function(a){return i.yScale.value(i.yOpenValue.value(a))},f=function(a){return i.yScale.value(i.yHighValue.value(a))},g=function(a){return i.yScale.value(i.yLowValue.value(a))},h=function(a){return i.yScale.value(i.yCloseValue.value(a))},i=function(c){c.each(function(c){var j=a.select(this),k=b.utilities.simpleDataJoin(j,"ohlc",c,i.xValue.value);k.enter().append("path"),k.classed({up:function(a){return i.yCloseValue.value(a)>i.yOpenValue.value(a)},down:function(a){return i.yCloseValue.value(a)<i.yOpenValue.value(a)}});var l=i.barWidth.value(c.map(d)),m=l/2;k.select("path").attr("d",function(a){var b="M"+d(a)+","+g(a),c="V"+f(a),i="M"+d(a)+","+e(a)+"h"+-m,j="M"+d(a)+","+h(a)+"h"+m;return b+c+i+j}),i.decorate.value(k)})};return i.decorate=b.utilities.property(b.utilities.fn.noop),i.xScale=b.utilities.property(a.time.scale()),i.yScale=b.utilities.property(a.scale.linear()),i.barWidth=b.utilities.functorProperty(b.utilities.fractionalBarWidth(.75)),i.yOpenValue=b.utilities.property(function(a){return a.open}),i.yHighValue=b.utilities.property(function(a){return a.high}),i.yLowValue=b.utilities.property(function(a){return a.low}),i.yCloseValue=b.utilities.property(function(a){return a.close}),i.xValue=b.utilities.property(function(a){return a.date}),i}}(d3,fc),function(a,b){"use strict";b.series.point=function(){var c=function(a){return e.xScale.value(e.xValue.value(a))},d=function(a){return e.yScale.value(e.yValue.value(a))},e=function(f){f.each(function(f){var g=a.select(this),h=b.utilities.simpleDataJoin(g,"point",f,e.xValue.value);h.enter().append("circle"),h.select("circle").attr("cx",c).attr("cy",d).attr("r",e.radius.value),e.decorate.value(h)})};return e.decorate=b.utilities.property(b.utilities.fn.noop),e.xScale=b.utilities.property(a.time.scale()),e.yScale=b.utilities.property(a.scale.linear()),e.yValue=b.utilities.property(function(a){return a.close}),e.xValue=b.utilities.property(function(a){return a.date}),e.radius=b.utilities.functorProperty(5),e}}(d3,fc),function(a,b){"use strict";b.series.stackedBar=function(){var c=a.layout.stack(),d=function(e){var f=b.series.bar().xScale(d.xScale.value).yScale(d.yScale.value).xValue(c.x()).yValue(c.y()).y0Value(d.y0Value.value);e.each(function(b){var e=c(b),g=a.select(this),h=e.map(c.values()),i=g.selectAll("g.stacked-bar").data(h).enter().append("g").attr("class","stacked-bar").call(f);d.decorate.value(i)})};return d.decorate=b.utilities.property(b.utilities.fn.noop),d.barWidth=b.utilities.functorProperty(b.utilities.fractionalBarWidth(.75)),d.xScale=b.utilities.property(a.time.scale()),d.yScale=b.utilities.property(a.scale.linear()),d.y0Value=b.utilities.property(function(a){return a.y0}),b.utilities.rebind(d,c,{xValue:"x",yValue:"y",out:"out",offset:"offset",values:"values",order:"order"})}}(d3,fc),function(a,b){"use strict";b.tools.annotation=function(){var c=function(d){d.each(function(d){var e=c.xScale.value.range(),f=function(a){return c.yScale.value(c.yValue.value(a))},g=a.select(this),h=b.utilities.simpleDataJoin(g,"annotation",d,c.keyValue.value),i=h.enter();i.append("line"),i.append("text"),h.select("line").attr("x1",e[0]).attr("y1",f).attr("x2",e[1]).attr("y2",f);var j=c.padding.value.apply(this,arguments);h.select("text").attr("x",e[1]-j).attr("y",function(a){return f(a)-j}).text(c.label.value),c.decorate.value(h)})};return c.xScale=b.utilities.property(a.time.scale()),c.yScale=b.utilities.property(a.scale.linear()),c.yValue=b.utilities.functorProperty(b.utilities.fn.identity),c.keyValue=b.utilities.functorProperty(b.utilities.fn.index),c.label=b.utilities.functorProperty(c.yValue.value),c.padding=b.utilities.functorProperty(2),c.decorate=b.utilities.property(b.utilities.fn.noop),c}}(d3,fc),function(a,b){"use strict";b.tools.crosshairs=function(){function c(){var b=a.mouse(this),c=a.select(this).on("mousemove.crosshairs",d).on("mouseleave.crosshairs",e),h=g.snap.value.apply(this,b),i=c.datum();i.push(h),c.call(g),f.trackingstart.apply(this,arguments)}function d(){var b=a.mouse(this),c=a.select(this),d=g.snap.value.apply(this,b),e=c.datum();e[e.length-1]=d,c.call(g),f.trackingmove.apply(this,arguments)}function e(){var b=a.select(this),c=b.datum();c.pop(),b.call(g).on("mousemove.crosshairs",null).on("mouseleave.crosshairs",null),f.trackingend.apply(this,arguments)}var f=a.dispatch("trackingstart","trackingmove","trackingend"),g=function(d){d.each(function(d){function e(a){return a.value.rangeExtent?a.value.rangeExtent():a.value.range()}function f(a){return e(a)[0]}function h(a){return e(a)[1]}var i=a.select(this).style("pointer-events","all").on("mouseenter.crosshairs",c),j=i.selectAll("rect").data([d]);j.enter().append("rect").style("visibility","hidden"),i.select("rect").attr("x",f(g.xScale)).attr("y",h(g.yScale)).attr("width",h(g.xScale)).attr("height",f(g.yScale));var k=b.utilities.simpleDataJoin(i,"crosshairs",d),l=k.enter();l.append("line").attr("class","horizontal"),l.append("line").attr("class","vertical"),l.append("text").attr("class","horizontal"),l.append("text").attr("class","vertical"),k.select("line.horizontal").attr("x1",f(g.xScale)).attr("x2",h(g.xScale)).attr("y1",function(a){return a.y}).attr("y2",function(a){return a.y}),k.select("line.vertical").attr("y1",f(g.yScale)).attr("y2",h(g.yScale)).attr("x1",function(a){return a.x}).attr("x2",function(a){return a.x});var m=g.padding.value.apply(this,arguments);k.select("text.horizontal").attr("x",h(g.xScale)-m).attr("y",function(a){return a.y-m}).text(g.yLabel.value),k.select("text.vertical").attr("x",function(a){return a.x-m}).attr("y",m).text(g.xLabel.value),g.decorate.value(k)})};return g.xScale=b.utilities.property(a.time.scale()),g.yScale=b.utilities.property(a.scale.linear()),g.snap=b.utilities.property(function(a,b){return{x:a,y:b}}),g.decorate=b.utilities.property(b.utilities.fn.noop),g.xLabel=b.utilities.functorProperty(""),g.yLabel=b.utilities.functorProperty(""),g.padding=b.utilities.functorProperty(2),a.rebind(g,f,"on"),g}}(d3,fc),function(a,b){"use strict";b.tools.fibonacciFan=function(){function c(){var b=a.select(this),c=b.datum()[0];if("DONE"!==c.state){var d=a.mouse(this),e=i.snap.value.apply(this,d);if("SELECT_SOURCE"===c.state)c.source=c.target=e;else{if("SELECT_TARGET"!==c.state)throw new Error("Unknown state "+c.state);c.target=e}}}function d(){var b=a.select(this).on("click.fan",g).on("mousemove.fan",e).on("mouseleave.fan",f),d=b.datum();null==d[0]&&d.push({state:"SELECT_SOURCE"}),c.call(this),b.call(i)}function e(){var b=a.select(this);c.call(this),b.call(i)}function f(){var b=a.select(this),c=b.datum();null!=c[0]&&"SELECT_SOURCE"===c[0].state&&c.pop(),b.on("click.fan",null).on("mousemove.fan",null).on("mouseleave.fan",null)}function g(){var b=a.select(this),d=b.datum()[0];switch(d.state){case"SELECT_SOURCE":c.call(this),h.fansource.apply(this,arguments),d.state="SELECT_TARGET";break;case"SELECT_TARGET":c.call(this),h.fantarget.apply(this,arguments),d.state="DONE";break;case"DONE":h.fanclear.apply(this,arguments),d.state="SELECT_SOURCE",c.call(this);break;default:throw new Error("Unknown state "+d.state)}b.call(i)}var h=a.dispatch("fansource","fantarget","fanclear"),i=function(c){c.each(function(c){var e=a.select(this).style("pointer-events","all").on("mouseenter.fan",d),f=e.selectAll("rect").data([c]);f.enter().append("rect").style("visibility","hidden"),e.select("rect").attr("x",i.xScale.value.range()[0]).attr("y",i.yScale.value.range()[1]).attr("width",i.xScale.value.range()[1]).attr("height",i.yScale.value.range()[0]);var g=b.utilities.simpleDataJoin(e,"fan",c);g.each(function(a){if(a.x=i.xScale.value.range()[1],a.ay=a.by=a.cy=a.target.y,a.source.x!==a.target.x){if("DONE"===a.state&&a.source.x>a.target.x){var b=a.source;a.source=a.target,a.target=b}var c=(a.target.y-a.source.y)/(a.target.x-a.source.x),d=a.x-a.source.x,e=c*d;a.ay=.618*e+a.source.y,a.by=.5*e+a.source.y,a.cy=.382*e+a.source.y}});var h=g.enter();h.append("line").attr("class","trend"),h.append("line").attr("class","a"),h.append("line").attr("class","b"),h.append("line").attr("class","c"),h.append("polygon").attr("class","area"),g.select("line.trend").attr("x1",function(a){return a.source.x}).attr("y1",function(a){return a.source.y}).attr("x2",function(a){return a.target.x}).attr("y2",function(a){return a.target.y}),g.select("line.a").attr("x1",function(a){return a.source.x}).attr("y1",function(a){return a.source.y}).attr("x2",function(a){return a.x}).attr("y2",function(a){return a.ay}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),g.select("line.b").attr("x1",function(a){return a.source.x}).attr("y1",function(a){return a.source.y}).attr("x2",function(a){return a.x}).attr("y2",function(a){return a.by}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),g.select("line.c").attr("x1",function(a){return a.source.x}).attr("y1",function(a){return a.source.y}).attr("x2",function(a){return a.x}).attr("y2",function(a){return a.cy}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),g.select("polygon.area").attr("points",function(a){return a.source.x+","+a.source.y+" "+a.x+","+a.ay+" "+a.x+","+a.cy}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),i.decorate.value(g)})};return i.xScale=b.utilities.property(a.time.scale()),i.yScale=b.utilities.property(a.scale.linear()),i.snap=b.utilities.property(function(a,b){return{x:a,y:b}}),i.decorate=b.utilities.property(b.utilities.fn.noop),a.rebind(i,h,"on"),i}}(d3,fc),function(a,b){"use strict";b.tools.measure=function(){function c(){var b=a.select(this),c=b.datum()[0];if("DONE"!==c.state){var d=a.mouse(this),e=i.snap.value.apply(this,d);if("SELECT_SOURCE"===c.state)c.source=c.target=e;
else{if("SELECT_TARGET"!==c.state)throw new Error("Unknown state "+c.state);c.target=e}}}function d(){var b=a.select(this).on("click.measure",g).on("mousemove.measure",e).on("mouseleave.measure",f),d=b.datum();null==d[0]&&d.push({state:"SELECT_SOURCE"}),c.call(this),b.call(i)}function e(){var b=a.select(this);c.call(this),b.call(i)}function f(){var b=a.select(this),c=b.datum();null!=c[0]&&"SELECT_SOURCE"===c[0].state&&c.pop(),b.on("click.measure",null).on("mousemove.measure",null).on("mouseleave.measure",null)}function g(){var b=a.select(this),d=b.datum()[0];switch(d.state){case"SELECT_SOURCE":c.call(this),h.measuresource.apply(this,arguments),d.state="SELECT_TARGET";break;case"SELECT_TARGET":c.call(this),h.measuretarget.apply(this,arguments),d.state="DONE";break;case"DONE":h.measureclear.apply(this,arguments),d.state="SELECT_SOURCE",c.call(this);break;default:throw new Error("Unknown state "+d.state)}b.call(i)}var h=a.dispatch("measuresource","measuretarget","measureclear"),i=function(c){c.each(function(c){var e=a.select(this).style("pointer-events","all").on("mouseenter.measure",d),f=e.selectAll("rect").data([c]);f.enter().append("rect").style("visibility","hidden"),e.select("rect").attr("x",i.xScale.value.range()[0]).attr("y",i.yScale.value.range()[1]).attr("width",i.xScale.value.range()[1]).attr("height",i.yScale.value.range()[0]);var g=b.utilities.simpleDataJoin(e,"measure",c),h=g.enter();h.append("line").attr("class","tangent"),h.append("line").attr("class","horizontal"),h.append("line").attr("class","vertical"),h.append("text").attr("class","horizontal"),h.append("text").attr("class","vertical"),g.select("line.tangent").attr("x1",function(a){return a.source.x}).attr("y1",function(a){return a.source.y}).attr("x2",function(a){return a.target.x}).attr("y2",function(a){return a.target.y}),g.select("line.horizontal").attr("x1",function(a){return a.source.x}).attr("y1",function(a){return a.source.y}).attr("x2",function(a){return a.target.x}).attr("y2",function(a){return a.source.y}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),g.select("line.vertical").attr("x1",function(a){return a.target.x}).attr("y1",function(a){return a.target.y}).attr("x2",function(a){return a.target.x}).attr("y2",function(a){return a.source.y}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"});var j=i.padding.value.apply(this,arguments);g.select("text.horizontal").attr("x",function(a){return a.source.x+(a.target.x-a.source.x)/2}).attr("y",function(a){return a.source.y-j}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}).text(i.xLabel.value),g.select("text.vertical").attr("x",function(a){return a.target.x+j}).attr("y",function(a){return a.source.y+(a.target.y-a.source.y)/2}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}).text(i.yLabel.value),i.decorate.value(g)})};return i.xScale=b.utilities.property(a.time.scale()),i.yScale=b.utilities.property(a.scale.linear()),i.snap=b.utilities.property(function(a,b){return{x:a,y:b}}),i.decorate=b.utilities.property(b.utilities.fn.noop),i.xLabel=b.utilities.functorProperty(""),i.yLabel=b.utilities.functorProperty(""),i.padding=b.utilities.functorProperty(2),a.rebind(i,h,"on"),i}}(d3,fc);
//# sourceMappingURL=d3-financial-components.min.js.map