---
layout: default
title: Volume
javascript: |
  // create a volume series, associating it with a pair of axes
  var volume = sl.series.volume()
            .xScale(x)
            .yScale(y)
            .barWidth(5);

  // add it to the plot area
  plotArea.append('g')
          .attr('class', 'series')
          .datum(data)
          .call(volume);
css: |
  .chart .volumebar.up-day rect {
      fill: #bcb;
      fill-opacity: 0.5;
  }

  .chart .volumebar.down-day rect {
      fill: #cbb;
      fill-opacity: 0.5;
  }
html: |
  <g class="volume-series">
      <g class="volumebar down-day">
          <rect></rect>
      </g>
      <g class="volumebar up-day">
          <rect></rect>
      </g>
  </g>
---

This component calculates and draws a bar chart data series primarily for display market volume information, the series shows volume or any other linear values on the Y axis against Date/Time on the X axis. The series can be styled using CSS to represent market gains or market losses in that time period.

<div id="volumeExample" style="height: 180px"> </div>

{% include tabs.html %}

<script type="text/javascript">
(function(){
  // Mock data generation (mu, sigma, startingPrice, intraDaySteps, filter)
  var data = sl.utilities.dataGenerator()
    .fromDate(new Date(2014, 1, 1))
    .toDate(new Date(2014, 3, 1))
    .generate();
  // Setup the chartLayout
  var chartLayout = sl.utilities.chartLayout()
    .marginBottom(30)
    .marginLeft(10)
    .marginRight(40);
  // The overall chart
  var setupArea = d3
    .select('#volumeExample')
    .call(chartLayout);
  // Select the elements which we'll want to add other elements to
  var svg = setupArea.select('svg'),
      chart = svg.select('g'),
      plotArea = chart.select('.plotArea');
  // Style the svg with a CSS class
  svg.attr('class', 'sl.hartArea');
  // Calculate the scales from the data
  var chartScale = {
      dateFrom: new Date(d3.min(data, function (d) { return d.date; }).getTime() - 8.64e7),
      dateTo: new Date(d3.max(data, function (d) { return d.date; }).getTime() + 8.64e7),
      volumeFrom: d3.min(data, function (d) { return d.volume; }),
      volumeTo: d3.max(data, function (d) { return d.volume; }),
  };
  var dateScale = sl.scale.finance()
      .domain([chartScale.dateFrom, chartScale.dateTo])
      .range([0, chartLayout.innerWidth()]);
  var volumeScale = d3.scale.linear()
      .domain([chartScale.volumeFrom, chartScale.volumeTo])
      .nice()
      .range([chartLayout.innerHeight(), 0]);
  // Create the axes
  var dateAxis = d3.svg.axis()
      .scale(dateScale)
      .orient('bottom')
      .ticks(5);
  var volumeAxis = d3.svg.axis()
      .scale(volumeScale)
      .orient('right')
      .ticks(5);
  // Add the axes to the chart
  chart.append('g')
      .attr('class', 'axis date')
      .attr('transform', 'translate(0,' + chartLayout.innerHeight() + ')')
      .call(dateAxis);
  chart.append('g')
      .attr('class', 'axis volume')
      .attr('transform', 'translate(' + chartLayout.innerWidth() + ',0)')
      .call(volumeAxis);
  // Create the Volume series
  var volume = sl.series.volume()
      .xScale(dateScale)
      .yScale(volumeScale);
  // Add the primary Volume series
  plotArea.selectAll('.series').remove();
  plotArea.append('g')
      .attr('class', 'series')
      .datum(data)
      .call(volume);
}());
</script>